<!DOCTYPE html><html><head><meta http-equiv="Content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title></title><link href="/demo/vendor.css" rel="stylesheet"><link href="/demo/client.css" rel="stylesheet"></head><body><div id="app"></div><script>window.HtmlCode='<div id="app"></div>',window.HtmlFold=[],window.CssCode="",window.CssFold=[],window.JsCode="function def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  })\n}\nfunction isPlainObject (obj) {\n  return Object.prototype.toString.call(obj) === '[object Object]'\n}\nfunction parsePath(path) {\n  const segments = path.split('.') //闭包保存层级数组\n  return function(obj) {\n    for (let i = 0; i < segments.length; i++) {\n      if (!obj) return;\n      obj = obj[segments[i]];\n    }\n    return obj;\n  }\n}\nfunction isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\nfunction extend (to, from) {\n  var keys = Object.keys(from)\n  var i = keys.length\n  while (i--) {\n    to[keys[i]] = from[keys[i]]\n  }\n  return to\n}\n\nvar arrayProto = Array.prototype;\nvar arrayMethods = Object.create(arrayProto);\n[\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n].forEach(\n  function(method) {\n    const original = arrayProto[method];\n    def(arrayMethods, method, function mutator () {\n      var i = arguments.length\n      var args = new Array(i)\n      while (i--) {\n        args[i] = arguments[i]\n      }\n      var result = original.apply(this, args)\n      var ob = this.__ob__\n      var inserted\n      switch (method) {\n        case 'push':\n          inserted = args\n          break\n        case 'unshift':\n          inserted = args\n          break\n        case 'splice':\n          inserted = args.slice(2)\n          break\n      }\n      if (inserted) ob.observeArray(inserted)\n      ob.dep.notify()\n      return result\n    })\n  }\n)\nfunction defineReactive(data, key, value) {\n  var dep = new Dep()\n  var childOb = observe(value)\n  Object.defineProperty(data, key, {\n    enumerable: true,\n    configurable: true,\n    get: function() {\n      if (Dep.target) {\n        dep.depend()\n        if (childOb) {\n          childOb.dep.depend()\n        }\n        if (Array.isArray(value)) {\n          for (var e, i = 0, l = value.length; i < l; i++) {\n            e = value[i]\n            e && e.__ob__ && e.__ob__.dep.depend()\n          }\n        }\n      }\n      return value;\n    },\n    set: function(newVal) {\n      if (value === newVal) {\n        return;\n      }\n      value = newVal;\n      childOb = observe(newVal)\n      dep.notify()\n    }\n  });\n}\n\nfunction Observer (value) {\n  this.value = value\n  this.dep = new Dep()\n  def(value, '__ob__', this)\n  if (Array.isArray(value)) {\n    value.__proto__ = arrayMethods;\n    this.observeArray(value)\n  } else {\n    this.walk(value)\n  }\n}\nObserver.prototype.observeArray = function (items) {\n  for (var i = 0, l = items.length; i < l; i++) {\n    observe(items[i])\n  }\n}\nObserver.prototype.walk = function (obj) {\n  var keys = Object.keys(obj)\n  for (var i = 0, l = keys.length; i < l; i++) {\n    defineReactive(this.value, keys[i], obj[keys[i]])\n  }\n}\nfunction observe (value) {\n  if (!value || typeof value !== 'object') {\n    return\n  }\n  var ob\n  if (\n    Object.prototype.hasOwnProperty.call(value, '__ob__') &&\n    value.__ob__ instanceof Observer\n  ) {\n    ob = value.__ob__\n  } else if (\n    (Array.isArray(value) || isPlainObject(value))\n    && Object.isExtensible(value)\n  ) {\n    ob = new Observer(value)\n  }\n  return ob\n}\n\nfunction Watcher (vm, expOrFn, cb, options) {\n  if (options) {\n    extend(this, options)\n  }\n  this.vm = vm\n  this.expression = expOrFn\n  this.cb = cb\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn\n  } else {\n    this.getter = parsePath(expOrFn)\n  }\n  this.value = this.getter.call(this.vm, this.vm)\n  this.shallow = false\n}\nWatcher.prototype.get = function () {\n  Dep.target = this\n  var value = this.getter.call(this.vm, this.vm)\n  Dep.target = null\n  return value\n}\nWatcher.prototype.update = function () {\n  var value = this.get()\n  if (\n    value !== this.value ||\n    ((isObject(value) || this.deep) && !this.shallow)\n  ) {\n    var oldValue = this.value\n    this.value = value\n    this.cb.call(this.vm, value, oldValue)\n  }\n}\n\nfunction Dep () {\n  this.subs = []\n}\nDep.target = null\nDep.prototype.depend = function () {\n  if (Dep.target) {\n    if (this.subs.indexOf(Dep.target) <= -1) {\n      this.subs.push(Dep.target)\n    }\n  }\n}\nDep.prototype.notify = function () {\n  var subs = this.subs\n  for (var i = 0, l = subs.length; i < l; i++) {\n    subs[i].update()\n  }\n}\n\nfunction Directive (descriptor, vm, el) {\n  this.vm = vm\n  this.el = el\n  this.descriptor = descriptor\n  this.name = descriptor.name\n  this.expression = descriptor.expression\n  this.arg = descriptor.arg\n}\nDirective.prototype._bind = function () {\n  var def = this.descriptor.def\n  extend(this, def)\n  if (this.bind) {\n    this.bind()\n  }\n  if (this.expression && this.update) {\n    var dir = this\n    this._update = function (val, oldVal) {\n      dir.update(val, oldVal)\n    }\n    this._watcher = new Watcher(this.vm, this.expression, this._update)\n    this.update(this._watcher .value)\n  }\n}\nvar publicDirectives = {\n  text: {\n    bind () {\n      this.attr = this.el.nodeType === 3 ? 'data' : 'textContent'\n    },\n    update (value) {\n      this.el[this.attr] = value == null ? '' : value.toString()\n    }\n  }\n}\n\nfunction stringToFragment (templateString) {\n  var tagRE = /<([\\w:-]+)/\n  var frag = document.createDocumentFragment()\n  var tagMatch = templateString.match(tagRE)\n  if (!tagMatch) {\n    frag.appendChild(\n      document.createTextNode(templateString)\n    )\n  } else {\n    var node = document.createElement('div')\n    node.innerHTML = templateString\n    frag.appendChild(node)\n  }\n  return frag\n}\nfunction replace (target, el) {\n  var parent = target.parentNode\n  if (parent) {\n    parent.replaceChild(el, target)\n  }\n}\nfunction transcludeTemplate (el, template) {\n  var frag = stringToFragment(template)\n  var replacer = frag.firstChild\n  var attrs = el.attributes\n  var i = attrs.length\n  var name, value\n  while (i--) {\n    name = attrs[i].name\n    value = attrs[i].value\n    if (!replacer.hasAttribute(name)) {\n      replacer.setAttribute(name, value)\n    }\n  }\n  return replacer\n}\nfunction parseText (text) {\n  var tagRE = /\{\{((?:.|\\n)+?)\}\}/g\n  if (!tagRE.test(text)) {\n    return null\n  }\n  var tokens = []\n  var lastIndex = tagRE.lastIndex = 0\n  var match, index, html, value\n  while (match = tagRE.exec(text)) {\n    index = match.index\n    // push text token\n    if (index > lastIndex) {\n      tokens.push({\n        value: text.slice(lastIndex, index)\n      })\n    }\n    // tag token\n    value = match[1]\n    tokens.push({\n      tag: true,\n      value: value.trim(),\n    })\n    lastIndex = index + match[0].length\n  }\n  if (lastIndex < text.length) {\n    tokens.push({\n      value: text.slice(lastIndex)\n    })\n  }\n  return tokens\n}\nfunction compile(el){\n  if (el.hasChildNodes()) {\n    compileNodeList(el.childNodes)\n  }\n}\nfunction compileNodeList(nodeList){\n  var node\n  for (var i = 0, l = nodeList.length; i < l; i++) {\n    node = nodeList[i]\n    compileNode(node)\n    if (node.hasChildNodes()) {\n      compileNodeList(node.childNodes)\n    }\n  }\n}\nfunction compileNode (node) {\n  var type = node.nodeType\n  if (type === 3 && node.data.trim()) {\n    compileTextNode(node)\n  }\n}\nfunction compileTextNode (node) {\n  var tokens = parseText(node.wholeText)\n  if (!tokens) {\n    return null\n  }\n  var frag = document.createDocumentFragment()\n  var el, token\n  for (var i = 0, l = tokens.length; i < l; i++) {\n    token = tokens[i]\n    if (token.tag) {\n      el = document.createTextNode(' ')\n      token.descriptor = {\n        name: 'text',\n        def: publicDirectives['text'],\n        expression: token.value,\n      }\n      var dir = new Directive(token.descriptor, data, el);\n      dir._bind();\n    } else {\n      el = document.createTextNode(token.value)\n    }\n    frag.appendChild(el)\n  }\n  replace(node, frag)\n}\n\nvar data = {\n  name: 'Jhon',\n  age: 18,\n}\n\nfunction init (el, data, template) {\n  var origin = el\n  new Observer(data)\n  el = transcludeTemplate(el, template)\n  compile(el)\n  replace(origin, el)\n  return el\n}\n\nvar root = document.querySelector('#app')\ninit(root, data, '<div><p>姓名：{{name}}</p><p>年纪：{{age}}</p></div>')",window.JsFold=[0,8,11,21,24,35,44,72,104,115,120,126,145,160,166,178,182,189,196,204,219,230,245,251,266,297,302,312]</script><script type="text/javascript" src="/demo/manifest.js"></script><script type="text/javascript" src="/demo/vendor.js"></script><script type="text/javascript" src="/demo/client.js"></script></body></html>